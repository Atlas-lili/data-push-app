(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34990701"],{"4ac2":function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("当前天气")]),s("sub-btn",{attrs:{url:"/api/addSub",params:{token:this.$store.getters.Userinfo.token,chartstr:this.city+"-WeatherNow"},disabled:t.disable1}})],1),s("div",{staticClass:"box-body"},[s("img",{staticClass:"cond-img",attrs:{src:t.cond_img,alt:t.cond.txt}}),s("div",{staticClass:"cond"},[s("p",{staticClass:"tmp"},[t._v(t._s(t.cond.tmp)+"°")]),s("div",{staticClass:"cond-txt"},[t._v(t._s(t.cond.txt))])]),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form",{attrs:{"label-position":"left","label-width":"120px"}},[s("el-form-item",{staticClass:"title",attrs:{label:"风向"}},[t._v(t._s(t.cond.wind_dir))]),s("el-form-item",{staticClass:"title",attrs:{label:"风力"}},[t._v(t._s(t.cond.wind_sc))]),s("el-form-item",{staticClass:"title",attrs:{label:"风速"}},[t._v(t._s(t.cond.wind_spd)),s("span",[t._v("km/h")])]),s("el-form-item",{staticClass:"title",attrs:{label:"相对湿度"}},[t._v(t._s(t.cond.hum)),s("span",[t._v("%")])])],1)],1),s("el-col",{attrs:{span:12}},[s("el-form",{attrs:{"label-position":"left","label-width":"120px"}},[s("el-form-item",{staticClass:"title",attrs:{label:"气压"}},[t._v(t._s(t.cond.pres)),s("span",[t._v("hPa")])]),s("el-form-item",{staticClass:"title",attrs:{label:"能见度"}},[t._v(t._s(t.cond.vis)),s("span",[t._v("km")])]),s("el-form-item",{staticClass:"title",attrs:{label:"降水量"}},[t._v(t._s(t.cond.pcpn)),s("span",[t._v("cm")])])],1)],1)],1)],1)])],1),s("el-col",{attrs:{span:12}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("当前空气质量")]),s("sub-btn",{attrs:{url:"/api/addSub",params:{token:this.$store.getters.Userinfo.token,chartstr:this.city+"-AirNow"},disabled:t.disable2}})],1),s("div",{staticClass:"box-body"},[s("div",{staticClass:"air-imp"},[s("p",{staticClass:"air-imp-titel"},[t._v("主要污染物")]),s("div",{staticClass:"air-imp-txt",domProps:{innerHTML:t._s(t.air_main)}})]),s("div",{staticClass:"aqi"},[s("p",{staticClass:"aqi-txt"},[t._v(t._s(t.air.qlty))]),s("div",{staticClass:"aqi-title"},[t._v("AQI"),s("span",[t._v(t._s(t.air.aqi))])])]),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form",{attrs:{"label-position":"left","label-width":"120px"}},[s("el-form-item",{staticClass:"title",attrs:{label:"PM10"}},[t._v(t._s(t.air.pm10))]),s("el-form-item",{staticClass:"title",attrs:{label:"PM25"}},[t._v(t._s(t.air.pm25))]),s("el-form-item",{staticClass:"title",attrs:{label:"二氧化氮"}},[t._v(t._s(t.air.no2))])],1)],1),s("el-col",{attrs:{span:12}},[s("el-form",{attrs:{"label-position":"left","label-width":"120px"}},[s("el-form-item",{staticClass:"title",attrs:{label:"二氧化硫"}},[t._v(t._s(t.air.so2))]),s("el-form-item",{staticClass:"title",attrs:{label:"一氧化碳"}},[t._v(t._s(t.air.co))]),s("el-form-item",{staticClass:"title",attrs:{label:"臭氧"}},[t._v(t._s(t.air.o3))])],1)],1)],1)],1)])],1)],1)},e=[],r=s("82ae"),n=s.n(r),o=s("9faa"),l=["100","103","104","300","301","406","407"],d={data:function(){return{cond:{code:"100",txt:"晴",tmp:"0",wind_dir:"-",wind_sc:"-",wind_spd:"-",hum:"-",pres:"-",vis:"-",pcpn:"-"},air:{main:"-",qlty:"-",aqi:"-",pm10:"-",pm25:"-",no2:"-",so2:"-",o3:"-"}}},watch:{city:{immediate:!0,handler:function(t){this.getWeather(t),this.getAir(t)}}},computed:{disable1:function(){var t=this.city+"-WeatherNow";return!(!Array.isArray(this.$store.getters.Userinfo.subList)||-1==this.$store.getters.Userinfo.subList.indexOf(t))},disable2:function(){var t=this.city+"-AirNow";return!(!Array.isArray(this.$store.getters.Userinfo.subList)||-1===this.$store.getters.Userinfo.subList.indexOf(t))},cond_img:function(){if(-1===l.indexOf(this.cond.code))return"/weather/"+this.cond.code+".png";var t=(new Date).getHours(),a=t>=18||t<=4;return"/weather/"+this.cond.code+(a?"n":"")+".png"},air_main:function(){var t={pm25:"PM25",pm10:"PM10",no2:'NO<span style="font-size:20px;">2</span>',so2:'SO<span style="font-size:20px;">2</span>',co:"CO",o3:'O<span style="font-size:20px;">3</span>',"-":"--"};return t[this.air.main]||this.air.main}},methods:{getWeather:function(t){var a=this;n.a.get("/api/weatherNow",{params:{city:t}}).then((function(t){"000"!==t.data.code?a.$message.error(t.data.info):(a.cond.code=t.data.data.cond_code,a.cond.txt=t.data.data.cond_txt,a.cond.tmp=t.data.data.tmp,a.cond.wind_dir=t.data.data.wind_dir,a.cond.wind_sc=t.data.data.wind_sc,a.cond.wind_spd=t.data.data.wind_spd,a.cond.hum=t.data.data.hum,a.cond.pres=t.data.data.pres,a.cond.vis=t.data.data.vis,a.cond.pcpn=t.data.data.pcpn)}))},getAir:function(t){var a=this;n.a.get("/api/airNow",{params:{city:t}}).then((function(t){"000"!==t.data.code?a.$message.error(t.data.info):(a.air.main=t.data.data.main,a.air.qlty=t.data.data.qlty,a.air.aqi=t.data.data.aqi,a.air.pm10=t.data.data.pm10,a.air.pm25=t.data.data.pm25,a.air.no2=t.data.data.no2,a.air.so2=t.data.data.so2,a.air.co=t.data.data.co,a.air.o3=t.data.data.o3)}))}},mounted:function(){},created:function(){this.getWeather(this.city),this.getAir(this.city)},components:{subBtn:o["a"]},props:{city:{type:String,required:!0}}},c=d,p=(s("808e"),s("e90a")),m=Object(p["a"])(c,i,e,!1,null,"fc8243bc",null);a["default"]=m.exports},6104:function(t,a,s){},"808e":function(t,a,s){"use strict";var i=s("6104"),e=s.n(i);e.a},"9faa":function(t,a,s){"use strict";var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return t.havaLoged?s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",disabled:t.disabled},on:{click:t.sub}},[t._v("订阅")]):t._e()},e=[],r=s("82ae"),n=s.n(r),o={computed:{havaLoged:function(){return!!this.$store.getters.Userinfo.token}},methods:{sub:function(){var t=this;n.a.post(this.url,this.params).then((function(a){a.data?"000"===a.data.code?(t.$message({message:"订阅成功！",type:"success"}),t.$store.commit("assignUserinfo",{subList:a.data.data})):t.$message.error(a.data.info):t.$message.error("请求出错！")}))}},props:{params:Object,url:String,disabled:Boolean}},l=o,d=s("e90a"),c=Object(d["a"])(l,i,e,!1,null,null,null);a["a"]=c.exports}}]);