(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f3aef8d8","chunk-122f98fe"],{"25f8":function(t,e,a){"use strict";var r=a("4b2a"),n=a.n(r);n.a},"4b2a":function(t,e,a){},"7d35":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("各省市疫情概览")]),a("sub-btn",{attrs:{url:"/api/addSub",params:{token:this.$store.getters.Userinfo.token,chartstr:"TotalLocalization"},disabled:t.disable1}})],1),a("div",{staticClass:"total-localization-container"},[a("e-chart",{ref:"toggle",attrs:{isMap:!0,mapConfig:{name:t.detailProvince,json:t.mapJson},option:t.option,beforLoad:t.setMap,onClick:t.onCheak,height:600,width:1040}})],1)])],1)],1)},n=[],i=(a("5ab2"),a("e10e"),a("6d57"),a("309f"),a("0b53"),a("06a2"),a("ec25"),a("2b45"),a("b449"),a("b081")),o=(a("cc57"),a("17d6")),s=a("82ae"),c=a.n(s),u=a("09d9"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("e-chart",{attrs:{option:t.option,height:540,width:800}})},d=[];function f(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=h(t))){var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n,i=!0,o=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){o=!0,n=t},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw n}}}}function h(t,e){if(t){if("string"===typeof t)return p(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var m={name:"ProvinceDetail",data:function(){return{cityList:[],todayBar:{name:"今天",type:"bar",data:[],itemStyle:{color:"#3300FF"}},yesterdayBar:{name:"昨天",type:"bar",data:[],itemStyle:{color:"#339933"}},confirmedBar:{name:"确诊病例",type:"bar",xAxisIndex:1,yAxisIndex:1,data:[],itemStyle:{color:"#ff0000"}},confirmedPie:{type:"pie",radius:["8%","15%"],center:["75%","25%"],selectedMode:"single",data:[],label:{show:!1,rotate:120},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},deadBar:{name:"死亡人数",type:"bar",xAxisIndex:1,yAxisIndex:1,data:[],itemStyle:{color:"#CC6600"}},curedBar:{name:"治愈人数",type:"bar",xAxisIndex:1,yAxisIndex:1,data:[],itemStyle:{color:"#00CC00"}}}},props:{provinceName:{type:String,required:!0},provinceData:{type:Object,required:!0}},computed:{option:function(){return{title:[{text:"".concat(this.provinceName," 近两日疫情变化图"),left:"20%",top:"top"},{text:"".concat(this.provinceName," 各县（市）疫情图"),left:"20%",top:"47%"},{text:"".concat(this.provinceName," 各县（市）确诊比例图"),left:"60%",top:"top"}],tooltip:{},grid:[{top:"8%",left:"12%",right:"50%",height:"38%",containLabel:!0},{top:"54%",left:"12%",right:"12%",height:"38%",containLabel:!0}],legend:[{data:["今天","昨天"],top:"8%",left:"2%",orient:"vertical"},{data:["确诊病例","死亡人数","治愈人数"],top:"54%",left:"2%",orient:"vertical"},{bottom:"54%",left:"50%",data:this.cityList}],graphic:[{type:"text",left:74.6-.2*String(this.todayBar.data[0]).length+"%",top:"24%",style:{text:"".concat(this.todayBar.data[0]),textAlign:"center",fill:"#cc0000",width:1e3,height:30,fontSize:10}}],xAxis:[{type:"value",position:"top"},{gridIndex:1,type:"category",data:this.cityList,position:"bottom",axisLabel:{interval:0,rotate:30}}],yAxis:[{type:"category",data:["确诊病例","死亡人数","治愈人数"]},{gridIndex:1,type:"value"}],series:[this.todayBar,this.yesterdayBar,this.confirmedBar,this.deadBar,this.curedBar,this.confirmedPie]}}},watch:{provinceName:function(){this.transformStatusToData()},provinceData:function(){this.transformStatusToData()}},methods:{transformStatusToData:function(){Object.assign(this.$data,this.$options.data()),"China"!==this.provinceName&&Object.keys(this.provinceData).length&&(this.transformToHistory(),this.transformTolocalization())},transformToHistory:function(){for(var t=["confirmedCount","deadCount","curedCount"],e=0,a=t;e<a.length;e++){var r=a[e];this.todayBar.data.push(this.provinceData.history[0][r]),this.yesterdayBar.data.push(this.provinceData.history[1][r])}},transformTolocalization:function(){var t,e=f(this.provinceData.cities);try{for(e.s();!(t=e.n()).done;){var a=t.value;this.cityList.push(a.cityName),this.confirmedBar.data.push(a.confirmedCount),this.deadBar.data.push(a.deadCount),this.curedBar.data.push(a.curedCount),this.confirmedPie.data.push({name:a.cityName,value:a.confirmedCount})}}catch(r){e.e(r)}finally{e.f()}}},created:function(){this.transformStatusToData()},components:{EChart:u["a"]}},y=m,v=a("e90a"),b=Object(v["a"])(y,l,d,!1,null,null,null),g=b.exports,C=a("9faa"),x=a("c1d0");function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function O(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function S(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=D(t))){var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n,i=!0,o=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){o=!0,n=t},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw n}}}}function D(t,e){if(t){if("string"===typeof t)return j(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?j(t,e):void 0}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function A(){return k.apply(this,arguments)}function k(){return k=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=x,t.abrupt("return",e.data);case 2:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}function P(t){return B.apply(this,arguments)}function B(){return B=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c.a.request({url:"China"===e?"/map/China.json":"/map/province/".concat(e,".json"),method:"get"});case 2:if(a=t.sent,200===a.status){t.next=5;break}return t.abrupt("return",null);case 5:return t.abrupt("return",a.data);case 6:case"end":return t.stop()}}),t)}))),B.apply(this,arguments)}var L={name:"TotalLocalization",data:function(){return{area:[],provincesData:[],citiesData:[],provincesDetailMap:{},detailProvince:"China",detailData:{},isOverlayShow:!1,inFirstLevel:!0,mapJson:null}},computed:{disable1:function(){var t="TotalLocalization";return!(!Array.isArray(this.$store.getters.Userinfo.subList)||-1==this.$store.getters.Userinfo.subList.indexOf(t))},option:function(){var t=this;return{backgroundColor:"#fff",title:{text:"".concat("China"===this.detailProvince?"各省":this.detailProvince," 确诊人数图"),left:"center",textStyle:{color:"#404a59"}},tooltip:{trigger:"item",formatter:function(e){var a=e.data,r=e.name;return"China"===t.detailProvince||t.citiesData.length?"确诊人数<br />".concat(r,":").concat(a?a.value:"0"):"确诊人数<br />".concat(r,":未知")},animation:!1},toolbox:{feature:{myBack:{show:!0,title:"返回",icon:"path://M380.931 512c56.863-103.016 66.444-260.153-156.931-254.912v126.912l-192-192 192-192v124.186c267.481-6.971 297.285 236.107 156.931 387.814z",iconStyle:{borderColor:"fff"},onclick:function(){t.overlayHide()}}}},visualMap:{type:"piecewise",pieces:[{min:1e4,color:"#ff0000"},{min:1e3,max:9999,color:"#cc0000"},{min:500,max:1e3,color:"#CC3300"},{min:100,max:499,color:"#CC6600"},{min:10,max:99,color:"#CC9900"},{min:1,max:9,color:"#CCCC00"}],textStyle:{color:"#404a59"},left:"20%",bottom:"20%"},series:[{name:"确诊人数",type:"map",roam:!0,map:this.detailProvince,emphasis:{label:{show:!0}},textFixed:{Alaska:[20,-20]},data:"China"===this.detailProvince?this.provincesData:this.citiesData}]}}},watch:{area:function(){this.transformStatusToData()}},methods:{update:function(){var t=this;A().then((function(e){e?t.catchArea(e):t.$toast.error("拉取数据失败！")}))},catchArea:function(t){var e,a=t.area,r=[],n=S(a);try{for(n.s();!(e=n.n()).done;){var i=e.value,o=i.provinceName,s=i.confirmedCount,c=i.curedCount,u=i.deadCount,l=i.suspectedCount,d=i.cities,f=i.yesterdayIncreased;r.push({provinceName:o,confirmedCount:s,curedCount:c,deadCount:u,suspectedCount:l,cities:d,history:[{confirmedCount:s,curedCount:c,deadCount:u,suspectedCount:l},O({},f)]})}}catch(h){n.e(h)}finally{n.f()}this.area=r},transformStatusToData:function(){this.provincesData.splice(0);var t,e=S(this.area);try{for(e.s();!(t=e.n()).done;){var a=t.value;this.provincesData.push({name:a.provinceName,value:a.confirmedCount}),this.provincesDetailMap[a.provinceName]={cities:a.cities,history:a.history}}}catch(r){e.e(r)}finally{e.f()}},setMap:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P(e);case 2:if(a=t.sent,a){t.next=6;break}return this.$toast.error("加载地图失败！"),t.abrupt("return");case 6:this.mapJson=a;case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onCheak:function(t){var e=t.data;this.detailProvince!==e.name&&this.inFirstLevel&&(this.inFirstLevel=!1,this.detailData=this.provincesDetailMap[e.name],this.isOverlayShow=!0,this.updateMap(e.name))},overlayHide:function(){"China"===this.detailProvince||this.inFirstLevel||(this.inFirstLevel=!0,this.detailData={},this.isOverlayShow=!1,this.updateMap("China"))},updateMap:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.setMap(e);case 2:if(this.detailProvince=e,this.citiesData.splice(0),this.detailData.cities){t.next=6;break}return t.abrupt("return");case 6:a=S(this.detailData.cities);try{for(a.s();!(r=a.n()).done;)n=r.value,this.citiesData.push({name:n.cityName,value:n.confirmedCount})}catch(i){a.e(i)}finally{a.f()}case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},created:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.update(),t.next=3,this.setMap("China");case 3:this.transformStatusToData();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),components:{EChart:u["a"],ProvinceDetail:g,subBtn:C["a"]}},T=L,M=(a("9286"),Object(v["a"])(T,r,n,!1,null,"376d1e7e",null));e["default"]=M.exports},9286:function(t,e,a){"use strict";var r=a("dbda"),n=a.n(r);n.a},dbda:function(t,e,a){},fd62:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("total-localization",{staticClass:"chart-center"})],1)},n=[],i=(a("b449"),a("17d6"),a("c1d0"),a("7d35"));var o={name:"EpidemicNow",components:{TotalLocalization:i["default"]}},s=o,c=(a("25f8"),a("e90a")),u=Object(c["a"])(s,r,n,!1,null,"a5d77152",null);e["default"]=u.exports}}]);